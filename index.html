<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Strange Cave</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            overflow-x: hidden;
            overflow-y: auto;
            font-family: 'Arial', sans-serif;
            cursor: none;
            scroll-behavior: smooth;
        }

        .cave-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0.9) 0%,
                rgba(20, 15, 10, 0.8) 30%,
                rgba(40, 30, 20, 0.6) 70%,
                rgba(60, 45, 30, 0.4) 100%
            );
            overflow: hidden;
        }

        .cave-wall {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('Cave-wall.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.7;
            z-index: 1;
        }

        .cave-entrance {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 200px;
            background: radial-gradient(
                ellipse at center,
                rgba(139, 69, 19, 0.3) 0%,
                rgba(101, 67, 33, 0.5) 30%,
                rgba(62, 39, 35, 0.8) 70%,
                rgba(0, 0, 0, 1) 100%
            );
            border-radius: 50%;
            box-shadow: 
                inset 0 0 50px rgba(0, 0, 0, 0.8),
                0 0 100px rgba(139, 69, 19, 0.2);
            z-index: 2;
            animation: breathe 4s ease-in-out infinite;
        }

        .cave-text {
            position: absolute;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            color: #FFD700;
            font-size: 2.5rem;
            text-shadow: 
                0 0 5px rgba(255, 215, 0, 1),
                0 0 10px rgba(255, 215, 0, 0.8),
                0 0 20px rgba(255, 215, 0, 0.6),
                0 0 30px rgba(255, 215, 0, 0.4),
                0 0 40px rgba(255, 215, 0, 0.3),
                0 0 50px rgba(255, 215, 0, 0.2);
            text-align: center;
            z-index: 11;
            opacity: 0;
            animation: fadeIn 3s ease-in 2s forwards, textGlow 4s ease-in-out infinite;
        }

        .stalactites {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(
                to bottom,
                rgba(101, 67, 33, 0.8) 0%,
                rgba(62, 39, 35, 0.6) 50%,
                transparent 100%
            );
            z-index: 2;
        }

        .stalagmites {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20%;
            background: linear-gradient(
                to top,
                rgba(101, 67, 33, 0.8) 0%,
                rgba(62, 39, 35, 0.6) 50%,
                transparent 100%
            );
            z-index: 2;
        }

        .cave-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 400px;
            background: radial-gradient(
                circle,
                rgba(255, 140, 0, 0.1) 0%,
                rgba(255, 69, 0, 0.05) 30%,
                transparent 70%
            );
            z-index: 1;
            animation: pulse 6s ease-in-out infinite;
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(139, 69, 19, 0.6);
            border-radius: 50%;
            animation: float 8s linear infinite;
        }

        .custom-cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 200px;
            height: 200px;
            background: radial-gradient(
                circle,
                rgba(255, 255, 200, 0.4) 0%,
                rgba(255, 220, 150, 0.3) 20%,
                rgba(255, 180, 100, 0.2) 40%,
                rgba(255, 140, 80, 0.1) 60%,
                transparent 80%
            );
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: screen;
            will-change: transform;
        }

        .flashlight-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(
                circle 200px at var(--mouse-x, 50%) var(--mouse-y, 50%),
                transparent 0%,
                transparent 25%,
                rgba(0, 0, 0, 0.2) 45%,
                rgba(0, 0, 0, 0.6) 75%,
                rgba(0, 0, 0, 0.9) 100%
            );
            pointer-events: none;
            z-index: 10;
        }

        @keyframes breathe {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.1); }
        }

        @keyframes float {
            0% { 
                transform: translateY(100vh) translateX(0px);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { 
                transform: translateY(-10px) translateX(50px);
                opacity: 0;
            }
        }

        @keyframes textGlow {
            0%, 100% { 
                text-shadow: 
                    0 0 5px rgba(255, 215, 0, 1),
                    0 0 10px rgba(255, 215, 0, 0.8),
                    0 0 20px rgba(255, 215, 0, 0.6),
                    0 0 30px rgba(255, 215, 0, 0.4),
                    0 0 40px rgba(255, 215, 0, 0.3),
                    0 0 50px rgba(255, 215, 0, 0.2);
            }
            50% { 
                text-shadow: 
                    0 0 10px rgba(255, 215, 0, 1),
                    0 0 20px rgba(255, 215, 0, 0.9),
                    0 0 30px rgba(255, 215, 0, 0.8),
                    0 0 40px rgba(255, 215, 0, 0.6),
                    0 0 60px rgba(255, 215, 0, 0.4),
                    0 0 80px rgba(255, 215, 0, 0.3);
            }
        }

        .enter-button {
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 30px;
            background: rgba(139, 69, 19, 0.4);
            border: 2px solid rgba(139, 69, 19, 0.9);
            color: #CD853F;
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            z-index: 3;
            opacity: 0;
            animation: fadeIn 3s ease-in 4s forwards;
            text-shadow: 0 0 8px rgba(205, 133, 63, 0.4);
            box-shadow: 0 0 10px rgba(139, 69, 19, 0.3);
        }

        .enter-button:hover {
            background: rgba(139, 69, 19, 0.6);
            box-shadow: 0 0 25px rgba(139, 69, 19, 0.7);
            transform: translateX(-50%) scale(1.05);
            text-shadow: 0 0 12px rgba(205, 133, 63, 0.6);
        }

        /* Deeper Cave Section */
        .deeper-cave-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(
                to bottom,
                rgba(60, 45, 30, 0.4) 0%,
                rgba(40, 25, 15, 0.7) 20%,
                rgba(20, 10, 5, 0.9) 50%,
                rgba(10, 5, 0, 0.95) 80%,
                rgba(0, 0, 0, 1) 100%
            );
            overflow: hidden;
        }

        .deeper-cave-wall {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('Cave-wall.png');
            background-size: cover;
            background-position: center bottom;
            background-repeat: no-repeat;
            opacity: 0.5;
            z-index: 1;
            filter: brightness(0.3) contrast(1.2);
        }

        .cave-painting {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 800px;
            height: auto;
            z-index: 3;
            opacity: 0;
            animation: revealPainting 4s ease-in 1s forwards;
            border-radius: 15px;
            box-shadow: 
                0 0 30px rgba(139, 69, 19, 0.4),
                inset 0 0 50px rgba(0, 0, 0, 0.3);
        }

        .deeper-cave-text {
            position: absolute;
            bottom: 15%;
            left: 50%;
            transform: translateX(-50%);
            color: #CD853F;
            font-size: 2rem;
            text-shadow: 
                0 0 5px rgba(205, 133, 63, 1),
                0 0 10px rgba(205, 133, 63, 0.8),
                0 0 20px rgba(205, 133, 63, 0.6),
                0 0 30px rgba(205, 133, 63, 0.4);
            text-align: center;
            z-index: 11;
            opacity: 0;
            animation: fadeIn 3s ease-in 3s forwards, ancientGlow 5s ease-in-out infinite;
            max-width: 90%;
        }

        .deeper-stalactites {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(
                to bottom,
                rgba(62, 39, 35, 0.9) 0%,
                rgba(40, 25, 15, 0.7) 40%,
                rgba(20, 10, 5, 0.5) 70%,
                transparent 100%
            );
            z-index: 2;
        }

        .deeper-stalagmites {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 25%;
            background: linear-gradient(
                to top,
                rgba(62, 39, 35, 0.9) 0%,
                rgba(40, 25, 15, 0.7) 40%,
                rgba(20, 10, 5, 0.5) 70%,
                transparent 100%
            );
            z-index: 2;
        }

        .ancient-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 900px;
            height: 600px;
            background: radial-gradient(
                ellipse,
                rgba(139, 69, 19, 0.15) 0%,
                rgba(101, 67, 33, 0.1) 30%,
                rgba(62, 39, 35, 0.05) 60%,
                transparent 80%
            );
            z-index: 1;
            animation: ancientPulse 8s ease-in-out infinite;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(139, 69, 19, 0.8);
            font-size: 1rem;
            text-align: center;
            z-index: 12;
            opacity: 0;
            animation: fadeIn 2s ease-in 5s forwards, bounce 2s ease-in-out infinite;
        }

        .scroll-arrow {
            display: block;
            font-size: 1.5rem;
            margin-top: 5px;
            animation: bounce 2s ease-in-out infinite;
        }

        /* Tutorial and Instruction Elements */
        .investigation-note {
            position: absolute;
            top: 10%;
            right: 5%;
            background: rgba(20, 15, 10, 0.9);
            border: 2px solid rgba(139, 69, 19, 0.6);
            border-radius: 10px;
            padding: 15px;
            max-width: 300px;
            color: #D2B48C;
            font-size: 0.9rem;
            text-shadow: 0 0 3px rgba(210, 180, 140, 0.5);
            z-index: 15;
            opacity: 0;
            animation: fadeIn 2s ease-in 6s forwards;
            box-shadow: 
                0 0 20px rgba(139, 69, 19, 0.4),
                inset 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .investigation-note h4 {
            color: #FFD700;
            font-size: 1rem;
            margin-bottom: 8px;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.7);
        }

        .bubble-hint {
            position: absolute;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 8px 12px;
            color: #FFD700;
            font-size: 0.8rem;
            text-shadow: 0 0 3px rgba(255, 215, 0, 0.5);
            z-index: 6;
            opacity: 0;
            animation: fadeIn 3s ease-in 8s forwards, gentlePulse 4s ease-in-out infinite;
            pointer-events: none;
            backdrop-filter: blur(2px);
        }

        .hint-1 { top: 15%; left: 15%; }
        .hint-2 { top: 25%; right: 15%; }
        .hint-3 { top: 45%; left: 10%; }
        .hint-4 { top: 20%; right: 10%; }
        .hint-5 { top: 40%; right: 5%; }
        .hint-6 { top: 15%; left: 25%; }

        .tutorial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            animation: fadeIn 1s ease-in 7s forwards;
        }

        .tutorial-content {
            background: rgba(20, 15, 10, 0.95);
            border: 3px solid rgba(139, 69, 19, 0.8);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            text-align: center;
            color: #D2B48C;
            box-shadow: 
                0 0 50px rgba(139, 69, 19, 0.6),
                inset 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .tutorial-content h2 {
            color: #FFD700;
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        .tutorial-content p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 15px;
            text-shadow: 0 0 3px rgba(210, 180, 140, 0.5);
        }

        .bubble-example {
            display: inline-block;
            width: 25px;
            height: 25px;
            background: radial-gradient(
                circle,
                rgba(255, 255, 255, 0.4) 0%,
                rgba(255, 255, 255, 0.2) 50%,
                transparent 100%
            );
            border: 2px solid rgba(255, 215, 0, 0.6);
            border-radius: 50%;
            margin: 0 5px;
            vertical-align: middle;
            animation: bubblePulse 2s ease-in-out infinite;
        }

        .tutorial-button {
            background: rgba(139, 69, 19, 0.6);
            border: 2px solid rgba(139, 69, 19, 0.9);
            color: #CD853F;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            text-shadow: 0 0 5px rgba(205, 133, 63, 0.5);
        }

        .tutorial-button:hover {
            background: rgba(139, 69, 19, 0.8);
            box-shadow: 0 0 15px rgba(139, 69, 19, 0.7);
            transform: scale(1.05);
        }

        @keyframes gentlePulse {
            0%, 100% { 
                opacity: 0.7;
                transform: scale(1);
            }
            50% { 
                opacity: 1;
                transform: scale(1.05);
            }
        }

        @keyframes revealPainting {
            0% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.8);
                filter: brightness(0) contrast(0);
            }
            50% { 
                opacity: 0.3; 
                transform: translate(-50%, -50%) scale(0.9);
                filter: brightness(0.3) contrast(0.5);
            }
            100% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1);
                filter: brightness(1) contrast(1);
            }
        }

        @keyframes ancientGlow {
            0%, 100% { 
                text-shadow: 
                    0 0 5px rgba(205, 133, 63, 1),
                    0 0 10px rgba(205, 133, 63, 0.8),
                    0 0 20px rgba(205, 133, 63, 0.6),
                    0 0 30px rgba(205, 133, 63, 0.4);
            }
            50% { 
                text-shadow: 
                    0 0 8px rgba(205, 133, 63, 1),
                    0 0 15px rgba(205, 133, 63, 0.9),
                    0 0 25px rgba(205, 133, 63, 0.7),
                    0 0 40px rgba(205, 133, 63, 0.5),
                    0 0 60px rgba(205, 133, 63, 0.3);
            }
        }

        @keyframes ancientPulse {
            0%, 100% { 
                opacity: 0.4; 
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                opacity: 0.7; 
                transform: translate(-50%, -50%) scale(1.05);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* Third Cave Section - The Rise */
        .third-cave-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(
                to bottom,
                rgba(10, 5, 0, 0.95) 0%,
                rgba(20, 5, 0, 0.97) 20%,
                rgba(30, 10, 0, 0.98) 40%,
                rgba(40, 15, 5, 0.99) 70%,
                rgba(0, 0, 0, 1) 100%
            );
            overflow: hidden;
        }

        .third-cave-wall {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('Cave-wall.png');
            background-size: cover;
            background-position: center bottom;
            background-repeat: no-repeat;
            opacity: 0.3;
            z-index: 1;
            filter: brightness(0.2) contrast(1.5) hue-rotate(15deg);
        }

        .third-cave-text {
            position: absolute;
            bottom: 12%;
            left: 50%;
            transform: translateX(-50%);
            color: #B8860B;
            font-size: 1.8rem;
            text-shadow: 
                0 0 5px rgba(184, 134, 11, 1),
                0 0 10px rgba(184, 134, 11, 0.8),
                0 0 20px rgba(184, 134, 11, 0.6),
                0 0 30px rgba(184, 134, 11, 0.4),
                0 0 40px rgba(255, 69, 0, 0.3);
            text-align: center;
            z-index: 11;
            opacity: 0;
            animation: fadeIn 3s ease-in 3s forwards, ominousGlow 6s ease-in-out infinite;
            max-width: 90%;
            font-style: italic;
        }

        .third-stalactites {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 45%;
            background: linear-gradient(
                to bottom,
                rgba(40, 25, 15, 0.95) 0%,
                rgba(30, 15, 5, 0.8) 30%,
                rgba(20, 10, 0, 0.6) 60%,
                transparent 100%
            );
            z-index: 2;
        }

        .third-stalagmites {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(
                to top,
                rgba(40, 25, 15, 0.95) 0%,
                rgba(30, 15, 5, 0.8) 30%,
                rgba(20, 10, 0, 0.6) 60%,
                transparent 100%
            );
            z-index: 2;
        }

        .ominous-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 1000px;
            height: 700px;
            background: radial-gradient(
                ellipse,
                rgba(184, 134, 11, 0.2) 0%,
                rgba(139, 69, 19, 0.15) 20%,
                rgba(255, 69, 0, 0.1) 40%,
                rgba(139, 0, 0, 0.05) 70%,
                transparent 90%
            );
            z-index: 1;
            animation: ominousPulse 10s ease-in-out infinite;
        }

        /* Fourth Cave Section - The Dark Reign */
        .fourth-cave-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(
                to bottom,
                rgba(0, 0, 0, 1) 0%,
                rgba(20, 0, 0, 1) 20%,
                rgba(40, 5, 5, 1) 40%,
                rgba(60, 10, 10, 1) 60%,
                rgba(80, 0, 0, 1) 80%,
                rgba(0, 0, 0, 1) 100%
            );
            overflow: hidden;
        }

        .fourth-cave-wall {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('Cave-wall.png');
            background-size: cover;
            background-position: center bottom;
            background-repeat: no-repeat;
            opacity: 0.2;
            z-index: 1;
            filter: brightness(0.1) contrast(2) hue-rotate(30deg) saturate(0.5);
        }

        .fourth-cave-text {
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            color: #8B0000;
            font-size: 1.6rem;
            text-shadow: 
                0 0 5px rgba(139, 0, 0, 1),
                0 0 10px rgba(139, 0, 0, 0.9),
                0 0 20px rgba(139, 0, 0, 0.7),
                0 0 30px rgba(139, 0, 0, 0.5),
                0 0 40px rgba(255, 0, 0, 0.4),
                0 0 60px rgba(255, 0, 0, 0.2);
            text-align: center;
            z-index: 11;
            opacity: 0;
            animation: fadeIn 4s ease-in 3s forwards, darkGlow 8s ease-in-out infinite;
            max-width: 90%;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .fourth-stalactites {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(
                to bottom,
                rgba(60, 10, 10, 1) 0%,
                rgba(40, 5, 5, 0.9) 20%,
                rgba(20, 0, 0, 0.7) 50%,
                transparent 100%
            );
            z-index: 2;
        }

        .fourth-stalagmites {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 35%;
            background: linear-gradient(
                to top,
                rgba(60, 10, 10, 1) 0%,
                rgba(40, 5, 5, 0.9) 20%,
                rgba(20, 0, 0, 0.7) 50%,
                transparent 100%
            );
            z-index: 2;
        }

        .dark-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 1200px;
            height: 800px;
            background: radial-gradient(
                ellipse,
                rgba(139, 0, 0, 0.3) 0%,
                rgba(255, 0, 0, 0.2) 15%,
                rgba(139, 0, 0, 0.15) 30%,
                rgba(80, 0, 0, 0.1) 50%,
                rgba(40, 0, 0, 0.05) 70%,
                transparent 90%
            );
            z-index: 1;
            animation: darkPulse 12s ease-in-out infinite;
        }

        .final-painting {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            max-width: 900px;
            height: auto;
            z-index: 3;
            opacity: 0;
            animation: darkReveal 5s ease-in 1s forwards;
            border-radius: 20px;
            box-shadow: 
                0 0 50px rgba(139, 0, 0, 0.6),
                0 0 100px rgba(255, 0, 0, 0.3),
                inset 0 0 80px rgba(0, 0, 0, 0.5);
        }

        @keyframes ominousGlow {
            0%, 100% { 
                text-shadow: 
                    0 0 5px rgba(184, 134, 11, 1),
                    0 0 10px rgba(184, 134, 11, 0.8),
                    0 0 20px rgba(184, 134, 11, 0.6),
                    0 0 30px rgba(184, 134, 11, 0.4),
                    0 0 40px rgba(255, 69, 0, 0.3);
            }
            50% { 
                text-shadow: 
                    0 0 8px rgba(184, 134, 11, 1),
                    0 0 15px rgba(184, 134, 11, 0.9),
                    0 0 25px rgba(184, 134, 11, 0.8),
                    0 0 40px rgba(184, 134, 11, 0.6),
                    0 0 60px rgba(255, 69, 0, 0.5),
                    0 0 80px rgba(255, 69, 0, 0.3);
            }
        }

        @keyframes darkGlow {
            0%, 100% { 
                text-shadow: 
                    0 0 5px rgba(139, 0, 0, 1),
                    0 0 10px rgba(139, 0, 0, 0.9),
                    0 0 20px rgba(139, 0, 0, 0.7),
                    0 0 30px rgba(139, 0, 0, 0.5),
                    0 0 40px rgba(255, 0, 0, 0.4),
                    0 0 60px rgba(255, 0, 0, 0.2);
            }
            50% { 
                text-shadow: 
                    0 0 10px rgba(139, 0, 0, 1),
                    0 0 20px rgba(139, 0, 0, 1),
                    0 0 30px rgba(139, 0, 0, 0.9),
                    0 0 50px rgba(139, 0, 0, 0.7),
                    0 0 70px rgba(255, 0, 0, 0.6),
                    0 0 100px rgba(255, 0, 0, 0.4);
            }
        }

        @keyframes ominousPulse {
            0%, 100% { 
                opacity: 0.5; 
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                opacity: 0.8; 
                transform: translate(-50%, -50%) scale(1.08);
            }
        }

        @keyframes darkPulse {
            0%, 100% { 
                opacity: 0.6; 
                transform: translate(-50%, -50%) scale(1);
            }
            33% { 
                opacity: 0.9; 
                transform: translate(-50%, -50%) scale(1.1);
            }
            66% { 
                opacity: 0.7; 
                transform: translate(-50%, -50%) scale(1.05);
            }
        }

        @keyframes darkReveal {
            0% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.7);
                filter: brightness(0) contrast(0) hue-rotate(0deg);
            }
            30% { 
                opacity: 0.2; 
                transform: translate(-50%, -50%) scale(0.8);
                filter: brightness(0.2) contrast(0.3) hue-rotate(10deg);
            }
            70% { 
                opacity: 0.7; 
                transform: translate(-50%, -50%) scale(0.95);
                filter: brightness(0.7) contrast(0.8) hue-rotate(20deg);
            }
            100% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1);
                filter: brightness(1) contrast(1) hue-rotate(30deg);
            }
        }

        /* Interactive Archaeological Elements */
        .air-bubble {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(
                circle,
                rgba(255, 255, 255, 0.3) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                transparent 100%
            );
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            cursor: pointer;
            z-index: 5;
            animation: bubblePulse 3s ease-in-out infinite;
            transition: all 0.3s ease;
            backdrop-filter: blur(2px);
        }

        .air-bubble:hover {
            transform: scale(1.2);
            background: radial-gradient(
                circle,
                rgba(255, 215, 0, 0.4) 0%,
                rgba(255, 215, 0, 0.2) 50%,
                transparent 100%
            );
            border-color: rgba(255, 215, 0, 0.6);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .zoom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .zoom-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            background: rgba(20, 15, 10, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 
                0 0 50px rgba(139, 69, 19, 0.6),
                inset 0 0 30px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(139, 69, 19, 0.4);
        }

        .zoom-image {
            width: 100%;
            height: auto;
            max-height: 60vh;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
            margin-bottom: 20px;
        }

        .archaeological-details {
            color: #D2B48C;
            font-size: 1.1rem;
            line-height: 1.6;
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
            text-shadow: 0 0 5px rgba(210, 180, 140, 0.5);
        }

        .archaeological-details h3 {
            color: #FFD700;
            font-size: 1.4rem;
            margin-bottom: 15px;
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.7);
            font-style: italic;
        }

        .close-zoom {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #CD853F;
            font-size: 2rem;
            cursor: pointer;
            z-index: 1001;
            transition: all 0.3s ease;
            text-shadow: 0 0 5px rgba(205, 133, 63, 0.5);
        }

        .close-zoom:hover {
            color: #FFD700;
            transform: scale(1.2);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        @keyframes bubblePulse {
            0%, 100% { 
                opacity: 0.6;
                transform: scale(1);
            }
            50% { 
                opacity: 1;
                transform: scale(1.1);
            }
        }

        /* Cave Sparks */
        .cave-spark {
            position: absolute;
            width: 3px;
            height: 3px;
            background: radial-gradient(
                circle,
                rgba(255, 215, 0, 1) 0%,
                rgba(255, 140, 0, 0.8) 30%,
                rgba(255, 69, 0, 0.6) 60%,
                transparent 100%
            );
            border-radius: 50%;
            z-index: 4;
            opacity: 0;
            pointer-events: none;
            box-shadow: 
                0 0 4px rgba(255, 215, 0, 0.8),
                0 0 8px rgba(255, 140, 0, 0.6),
                0 0 12px rgba(255, 69, 0, 0.4);
        }

        @keyframes sparkFlicker {
            0% { 
                opacity: 0;
                transform: scale(0.5);
                filter: brightness(0.5);
            }
            10% { 
                opacity: 1;
                transform: scale(1.2);
                filter: brightness(1.5);
            }
            20% { 
                opacity: 0.8;
                transform: scale(1);
                filter: brightness(1.2);
            }
            30% { 
                opacity: 1;
                transform: scale(1.3);
                filter: brightness(1.8);
            }
            40% { 
                opacity: 0.6;
                transform: scale(0.9);
                filter: brightness(1);
            }
            50% { 
                opacity: 0.9;
                transform: scale(1.1);
                filter: brightness(1.4);
            }
            60% { 
                opacity: 0.4;
                transform: scale(0.8);
                filter: brightness(0.8);
            }
            70% { 
                opacity: 0.7;
                transform: scale(1);
                filter: brightness(1.1);
            }
            80% { 
                opacity: 0.3;
                transform: scale(0.7);
                filter: brightness(0.6);
            }
            90% { 
                opacity: 0.1;
                transform: scale(0.5);
                filter: brightness(0.3);
            }
            100% { 
                opacity: 0;
                transform: scale(0.3);
                filter: brightness(0);
            }
        }

        /* Positioning for air bubbles on each painting */
        .bubble-1 { top: 25%; left: 30%; }
        .bubble-2 { top: 40%; left: 70%; }
        .bubble-3 { top: 60%; left: 45%; }
        .bubble-4 { top: 35%; left: 20%; }
        .bubble-5 { top: 55%; left: 75%; }
        .bubble-6 { top: 30%; left: 60%; }

        /* Contribute Button Styles */
        .contribute-section {
            position: absolute;
            bottom: 2%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 15;
        }

        .contribute-button {
            position: relative;
            padding: 20px 40px;
            background: linear-gradient(45deg, 
                rgba(139, 69, 19, 0.3) 0%,
                rgba(184, 134, 11, 0.4) 50%,
                rgba(139, 69, 19, 0.3) 100%);
            border: 3px solid rgba(255, 215, 0, 0.6);
            border-radius: 15px;
            color: #FFD700;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 
                0 0 5px rgba(255, 215, 0, 0.8),
                0 0 10px rgba(255, 215, 0, 0.6),
                0 0 15px rgba(255, 215, 0, 0.4);
            box-shadow: 
                0 0 20px rgba(255, 215, 0, 0.3),
                0 0 40px rgba(255, 215, 0, 0.2),
                inset 0 0 20px rgba(255, 215, 0, 0.1);
            animation: contributeGlow 3s ease-in-out infinite;
            overflow: hidden;
        }

        .contribute-button:hover {
            transform: scale(1.05);
            background: linear-gradient(45deg, 
                rgba(184, 134, 11, 0.5) 0%,
                rgba(255, 215, 0, 0.3) 50%,
                rgba(184, 134, 11, 0.5) 100%);
            border-color: rgba(255, 215, 0, 0.9);
            box-shadow: 
                0 0 30px rgba(255, 215, 0, 0.5),
                0 0 60px rgba(255, 215, 0, 0.3),
                0 0 90px rgba(255, 215, 0, 0.2),
                inset 0 0 30px rgba(255, 215, 0, 0.2);
            text-shadow: 
                0 0 8px rgba(255, 215, 0, 1),
                0 0 15px rgba(255, 215, 0, 0.8),
                0 0 25px rgba(255, 215, 0, 0.6);
        }

        .contribute-text {
            position: relative;
            z-index: 2;
        }

        .button-glow {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                circle,
                rgba(255, 215, 0, 0.1) 0%,
                rgba(255, 215, 0, 0.05) 30%,
                transparent 70%
            );
            animation: rotateGlow 4s linear infinite;
            z-index: 1;
        }

        @keyframes contributeGlow {
            0%, 100% {
                box-shadow: 
                    0 0 20px rgba(255, 215, 0, 0.3),
                    0 0 40px rgba(255, 215, 0, 0.2),
                    inset 0 0 20px rgba(255, 215, 0, 0.1);
            }
            50% {
                box-shadow: 
                    0 0 30px rgba(255, 215, 0, 0.5),
                    0 0 60px rgba(255, 215, 0, 0.3),
                    0 0 90px rgba(255, 215, 0, 0.2),
                    inset 0 0 30px rgba(255, 215, 0, 0.2);
            }
        }

        @keyframes rotateGlow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Contribute Tab Section at Bottom */
        .contribute-tab-section {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100vw;
            background: linear-gradient(
                to top,
                rgba(20, 10, 5, 0.95) 0%,
                rgba(40, 25, 15, 0.8) 50%,
                transparent 100%
            );
            backdrop-filter: blur(10px);
            border-top: 2px solid rgba(139, 69, 19, 0.6);
            z-index: 1000;
            padding: 15px 0;
        }

        .contribute-tab {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .contribute-tab-button {
            position: relative;
            padding: 15px 35px;
            background: linear-gradient(45deg, 
                rgba(139, 69, 19, 0.4) 0%,
                rgba(184, 134, 11, 0.5) 50%,
                rgba(139, 69, 19, 0.4) 100%);
            border: 2px solid rgba(255, 215, 0, 0.7);
            border-radius: 12px;
            color: #FFD700;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 
                0 0 5px rgba(255, 215, 0, 0.8),
                0 0 10px rgba(255, 215, 0, 0.6);
            box-shadow: 
                0 0 15px rgba(255, 215, 0, 0.3),
                0 0 30px rgba(255, 215, 0, 0.2),
                inset 0 0 15px rgba(255, 215, 0, 0.1);
            animation: tabGlow 4s ease-in-out infinite;
            overflow: hidden;
        }

        .contribute-tab-button:hover {
            transform: scale(1.05);
            background: linear-gradient(45deg, 
                rgba(184, 134, 11, 0.6) 0%,
                rgba(255, 215, 0, 0.4) 50%,
                rgba(184, 134, 11, 0.6) 100%);
            border-color: rgba(255, 215, 0, 0.9);
            box-shadow: 
                0 0 25px rgba(255, 215, 0, 0.5),
                0 0 50px rgba(255, 215, 0, 0.3),
                0 0 75px rgba(255, 215, 0, 0.2),
                inset 0 0 25px rgba(255, 215, 0, 0.2);
            text-shadow: 
                0 0 8px rgba(255, 215, 0, 1),
                0 0 15px rgba(255, 215, 0, 0.8),
                0 0 20px rgba(255, 215, 0, 0.6);
        }

        .contribute-tab-text {
            position: relative;
            z-index: 2;
        }

        .tab-glow {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                circle,
                rgba(255, 215, 0, 0.1) 0%,
                rgba(255, 215, 0, 0.05) 30%,
                transparent 70%
            );
            animation: rotateGlow 5s linear infinite;
            z-index: 1;
        }

        @keyframes tabGlow {
            0%, 100% {
                box-shadow: 
                    0 0 15px rgba(255, 215, 0, 0.3),
                    0 0 30px rgba(255, 215, 0, 0.2),
                    inset 0 0 15px rgba(255, 215, 0, 0.1);
            }
            50% {
                box-shadow: 
                    0 0 25px rgba(255, 215, 0, 0.4),
                    0 0 50px rgba(255, 215, 0, 0.3),
                    0 0 75px rgba(255, 215, 0, 0.2),
                    inset 0 0 25px rgba(255, 215, 0, 0.15);
            }
        }

        @media (max-width: 768px) {
            .cave-text {
                font-size: 1.8rem;
            }
            .cave-entrance {
                width: 250px;
                height: 150px;
            }
            .deeper-cave-text {
                font-size: 1.5rem;
            }
            .cave-painting {
                width: 95%;
            }
            .third-cave-text {
                font-size: 1.4rem;
            }
            .fourth-cave-text {
                font-size: 1.3rem;
            }
            .final-painting {
                width: 95%;
            }
            .air-bubble {
                width: 25px;
                height: 25px;
            }
            .archaeological-details {
                font-size: 1rem;
            }
            .zoom-content {
                padding: 15px;
            }
            .contribute-button {
                font-size: 1.1rem;
                padding: 15px 30px;
            }
        }
    </style>
</head>
<body>
    <div class="cave-container">
        <div class="cave-wall"></div>
        <div class="cave-glow"></div>
        <div class="stalactites"></div>
        <div class="stalagmites"></div>
        <div class="cave-entrance"></div>
        <div class="floating-particles" id="particles"></div>
        <div class="cave-text">Welcome to the dwellings of the last known humans</div>
        <button class="enter-button" onclick="enterCave()">Enter the Depths</button>
        <div class="scroll-indicator">
            Scroll down to explore deeper
            <span class="scroll-arrow">↓</span>
        </div>
        <div class="custom-cursor" id="cursor"></div>
        <div class="flashlight-overlay" id="flashlight"></div>
    </div>

    <!-- Deeper Cave Section -->
    <div class="deeper-cave-container">
        <div class="deeper-cave-wall"></div>
        <div class="ancient-glow"></div>
        <div class="deeper-stalactites"></div>
        <div class="deeper-stalagmites"></div>
        <img src="deeper-cave-paintings.png" alt="Ancient Cave Painting" class="cave-painting" id="painting1">
        <!-- Air bubbles for first painting -->
        <div class="air-bubble bubble-1" onclick="showArchaeologicalDetail('painting1', 'detail1')"></div>
        <div class="air-bubble bubble-2" onclick="showArchaeologicalDetail('painting1', 'detail2')"></div>
        <!-- Investigation note -->
        <div class="investigation-note">
            <h4>Archaeological Investigation</h4>
            <p>Look for glowing bubble markers <span class="bubble-example"></span> near the paintings to investigate specific details and uncover hidden secrets about these ancient artworks.</p>
        </div>
        <!-- Bubble hints -->
        <div class="bubble-hint hint-1">Click to investigate ritual symbols</div>
        <div class="bubble-hint hint-2">Examine the watchers</div>
        <div class="deeper-cave-text">Ancient markings from a forgotten civilization...</div>
        <div class="floating-particles" id="deeperParticles"></div>
    </div>

    <!-- Third Cave Section - The Rise -->
    <div class="third-cave-container">
        <div class="third-cave-wall"></div>
        <div class="ominous-glow"></div>
        <div class="third-stalactites"></div>
        <div class="third-stalagmites"></div>
        <img src="cave-painting-3.png" alt="The Rise of the Dark Leader" class="cave-painting" id="painting2">
        <!-- Air bubbles for second painting -->
        <div class="air-bubble bubble-3" onclick="showArchaeologicalDetail('painting2', 'detail3')"></div>
        <div class="air-bubble bubble-4" onclick="showArchaeologicalDetail('painting2', 'detail4')"></div>
        <!-- Bubble hints -->
        <div class="bubble-hint hint-3">Investigate the challenger's defiance</div>
        <div class="bubble-hint hint-4">Decode the power symbols</div>
        <div class="third-cave-text">Here begins the tale of one who dared challenge the gods themselves...<br>A leader arose, wielding power beyond mortal comprehension</div>
        <div class="floating-particles" id="thirdParticles"></div>
    </div>

    <!-- Fourth Cave Section - The Dark Reign -->
    <div class="fourth-cave-container">
        <div class="fourth-cave-wall"></div>
        <div class="dark-glow"></div>
        <div class="fourth-stalactites"></div>
        <div class="fourth-stalagmites"></div>
        <img src="cave-painting-4.png" alt="The Dark Reign Begins" class="final-painting" id="painting3">
        <!-- Air bubbles for third painting -->
        <div class="air-bubble bubble-5" onclick="showArchaeologicalDetail('painting3', 'detail5')"></div>
        <div class="air-bubble bubble-6" onclick="showArchaeologicalDetail('painting3', 'detail6')"></div>
        <!-- Bubble hints -->
        <div class="bubble-hint hint-5">Examine the throne of shadows</div>
        <div class="bubble-hint hint-6">Study the eclipse prophecy</div>
        <div class="fourth-cave-text">THE ASCENSION IS COMPLETE<br>The world trembles under the shadow of absolute power<br>This marks the beginning of the darkest age...</div>
        <div class="floating-particles" id="fourthParticles"></div>
        
    </div>

        <!-- Contribute Tab Section at Bottom -->
        <div class="contribute-tab-section">
            <div class="contribute-tab">
                <button class="contribute-tab-button" onclick="goToPaintingPage()">
                    <span class="contribute-tab-text">Contribute your own painting</span>
                    <div class="tab-glow"></div>
                </button>
                <button class="contribute-tab-button" onclick="goToGallery()" style="margin-left: 20px;">
                    <span class="contribute-tab-text">View Gallery of Visions</span>
                    <div class="tab-glow"></div>
                </button>
            </div>
        </div>

    <!-- Zoom Overlay for Archaeological Details -->
    <div class="zoom-overlay" id="zoomOverlay">
        <div class="zoom-content">
            <button class="close-zoom" onclick="closeZoom()">&times;</button>
            <img class="zoom-image" id="zoomImage" src="" alt="Archaeological Detail">
            <div class="archaeological-details" id="archaeologicalText">
                <h3 id="detailTitle">Archaeological Discovery</h3>
                <p id="detailDescription">Detailed analysis of the ancient markings...</p>
            </div>
        </div>
    </div>

    <audio id="caveAudio" loop>
        <source src="cave-sounds.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Custom cursor and flashlight effect
        const cursor = document.getElementById('cursor');
        const flashlight = document.getElementById('flashlight');
        let animationId;
        
        // Throttle mouse movement updates for better performance
        function updateFlashlightPosition(e) {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            animationId = requestAnimationFrame(() => {
                // Update cursor position
                cursor.style.transform = `translate(${e.clientX - 100}px, ${e.clientY - 100}px)`;
                
                // Update flashlight overlay position using transform instead of CSS variables
                const x = (e.clientX / window.innerWidth) * 100;
                const y = (e.clientY / window.innerHeight) * 100;
                flashlight.style.background = `radial-gradient(
                    circle 200px at ${x}% ${y}%,
                    transparent 0%,
                    transparent 25%,
                    rgba(0, 0, 0, 0.2) 45%,
                    rgba(0, 0, 0, 0.6) 75%,
                    rgba(0, 0, 0, 0.9) 100%
                )`;
            });
        }
        
        document.addEventListener('mousemove', updateFlashlightPosition);

        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Create particles for deeper cave
        function createDeeperParticles() {
            const deeperParticlesContainer = document.getElementById('deeperParticles');
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animationDuration = (Math.random() * 6 + 8) + 's';
                particle.style.background = 'rgba(101, 67, 33, 0.4)';
                deeperParticlesContainer.appendChild(particle);
            }
        }

        // Create particles for third cave (ominous)
        function createThirdParticles() {
            const thirdParticlesContainer = document.getElementById('thirdParticles');
            for (let i = 0; i < 12; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 12 + 's';
                particle.style.animationDuration = (Math.random() * 8 + 10) + 's';
                particle.style.background = 'rgba(184, 134, 11, 0.3)';
                particle.style.boxShadow = '0 0 3px rgba(255, 69, 0, 0.5)';
                thirdParticlesContainer.appendChild(particle);
            }
        }

        // Create particles for fourth cave (dark)
        function createFourthParticles() {
            const fourthParticlesContainer = document.getElementById('fourthParticles');
            for (let i = 0; i < 10; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 12) + 's';
                particle.style.background = 'rgba(139, 0, 0, 0.4)';
                particle.style.boxShadow = '0 0 4px rgba(255, 0, 0, 0.6)';
                fourthParticlesContainer.appendChild(particle);
            }
        }

        // Enter cave function
        function enterCave() {
            const audio = document.getElementById('caveAudio');
            audio.play().catch(e => console.log('Audio autoplay prevented'));
            
            // Add deeper cave effect
            document.body.style.background = 'radial-gradient(circle at center, rgba(0,0,0,0.9) 0%, rgba(0,0,0,1) 100%)';
            document.querySelector('.cave-text').innerHTML = 'You venture deeper into the mysterious depths...';
            document.querySelector('.enter-button').style.display = 'none';
            
            // Intensify the atmosphere
            document.querySelector('.cave-glow').style.animation = 'pulse 3s ease-in-out infinite';
            document.querySelector('.cave-entrance').style.animation = 'breathe 2s ease-in-out infinite';
        }

        // Cave spark system
        let lastSparkTime = 0;
        const sparkInterval = 10000; // 10 seconds

        function createCaveSpark() {
            const now = Date.now();
            if (now - lastSparkTime < sparkInterval) return;
            
            lastSparkTime = now;
            
            // Get all cave containers
            const containers = [
                document.querySelector('.cave-container'),
                document.querySelector('.deeper-cave-container'),
                document.querySelector('.third-cave-container'),
                document.querySelector('.fourth-cave-container')
            ];
            
            // Choose a random container that's currently visible or close to viewport
            const randomContainer = containers[Math.floor(Math.random() * containers.length)];
            if (!randomContainer) return;
            
            const spark = document.createElement('div');
            spark.className = 'cave-spark';
            
            // Position spark on edges of the frame
            const edge = Math.floor(Math.random() * 4); // 0=top, 1=right, 2=bottom, 3=left
            const edgePosition = Math.random() * 100;
            
            switch(edge) {
                case 0: // top edge
                    spark.style.top = '5%';
                    spark.style.left = edgePosition + '%';
                    break;
                case 1: // right edge
                    spark.style.right = '5%';
                    spark.style.top = edgePosition + '%';
                    break;
                case 2: // bottom edge
                    spark.style.bottom = '5%';
                    spark.style.left = edgePosition + '%';
                    break;
                case 3: // left edge
                    spark.style.left = '5%';
                    spark.style.top = edgePosition + '%';
                    break;
            }
            
            // Add spark animation
            spark.style.animation = 'sparkFlicker 2s ease-out forwards';
            
            randomContainer.appendChild(spark);
            
            // Remove spark after animation
            setTimeout(() => {
                if (spark.parentNode) {
                    spark.parentNode.removeChild(spark);
                }
            }, 2000);
        }

        // Initialize
        window.addEventListener('load', () => {
            createParticles();
            createDeeperParticles();
            createThirdParticles();
            createFourthParticles();
            
            // Start spark system
            setInterval(createCaveSpark, 1000); // Check every second
            
            // Attempt to play ambient sounds (user interaction may be required)
            const audio = document.getElementById('caveAudio');
            audio.volume = 0.3;
        });

        // Add click sound effect
        document.addEventListener('click', () => {
            // Create a subtle echo effect on click
            const clickRipple = document.createElement('div');
            clickRipple.style.position = 'fixed';
            clickRipple.style.width = '50px';
            clickRipple.style.height = '50px';
            clickRipple.style.border = '2px solid rgba(139, 69, 19, 0.5)';
            clickRipple.style.borderRadius = '50%';
            clickRipple.style.left = event.clientX - 25 + 'px';
            clickRipple.style.top = event.clientY - 25 + 'px';
            clickRipple.style.pointerEvents = 'none';
            clickRipple.style.zIndex = '9998';
            clickRipple.style.animation = 'ripple 1s ease-out forwards';
            document.body.appendChild(clickRipple);
            
            setTimeout(() => clickRipple.remove(), 1000);
        });

        // Archaeological detail data
        const archaeologicalDetails = {
            detail1: {
                title: "The Ritual Circle",
                description: "These circular markings appear to depict a sacred ritual. The symbols within suggest offerings to unknown deities. Carbon dating indicates this predates known civilizations by millennia. The precision of the geometric patterns suggests advanced mathematical understanding.",
                image: "deeper-cave-paintings.png"
            },
            detail2: {
                title: "The Watchers",
                description: "Elongated figures with oversized eyes dominate this section. Their gaze seems to follow the observer. Archaeological analysis reveals traces of ochre mixed with an unknown mineral compound. These beings may represent guardians or observers from another realm.",
                image: "deeper-cave-paintings.png"
            },
            detail3: {
                title: "The Challenger's Mark",
                description: "A single figure stands defiant against towering divine forms. The posture suggests rebellion or challenge. Microscopic analysis reveals the pigments were applied with unusual tools, possibly of meteoric origin. This may document the first act of defiance against the old gods.",
                image: "cave-painting-3.png"
            },
            detail4: {
                title: "Symbols of Power",
                description: "Strange glyphs surround the central figure, pulsing with an otherworldly energy even in static form. These symbols don't match any known ancient language. Spectrographic analysis shows they contain trace amounts of rare earth elements not found in this region.",
                image: "cave-painting-3.png"
            },
            detail5: {
                title: "The Throne of Shadows",
                description: "The leader now sits upon a throne made of what appears to be crystallized darkness. The surrounding figures bow in submission or terror. The painting technique here is unlike anything else in the cave - as if the artist was compelled by an external force.",
                image: "cave-painting-4.png"
            },
            detail6: {
                title: "The Eclipse Prophecy",
                description: "Above the dark throne, celestial bodies align in an impossible configuration. This may represent the moment when the natural order was forever changed. The astronomical accuracy is disturbing - this eclipse wouldn't occur for another thousand years from when this was painted.",
                image: "cave-painting-4.png"
            }
        };

        // Show archaeological detail function
        function showArchaeologicalDetail(paintingId, detailId) {
            const detail = archaeologicalDetails[detailId];
            if (!detail) return;

            const overlay = document.getElementById('zoomOverlay');
            const image = document.getElementById('zoomImage');
            const title = document.getElementById('detailTitle');
            const description = document.getElementById('detailDescription');

            // Set the content
            image.src = detail.image;
            title.textContent = detail.title;
            description.textContent = detail.description;

            // Show the overlay
            overlay.style.display = 'flex';
            
            // Prevent body scrolling when overlay is open
            document.body.style.overflow = 'hidden';
            
            // Add a subtle sound effect
            const clickRipple = document.createElement('div');
            clickRipple.style.position = 'fixed';
            clickRipple.style.width = '100px';
            clickRipple.style.height = '100px';
            clickRipple.style.border = '3px solid rgba(255, 215, 0, 0.7)';
            clickRipple.style.borderRadius = '50%';
            clickRipple.style.left = '50%';
            clickRipple.style.top = '50%';
            clickRipple.style.transform = 'translate(-50%, -50%)';
            clickRipple.style.pointerEvents = 'none';
            clickRipple.style.zIndex = '9999';
            clickRipple.style.animation = 'ripple 1.5s ease-out forwards';
            document.body.appendChild(clickRipple);
            
            setTimeout(() => clickRipple.remove(), 1500);
        }

        // Close zoom function
        function closeZoom() {
            const overlay = document.getElementById('zoomOverlay');
            overlay.style.display = 'none';
            
            // Restore body scrolling
            document.body.style.overflow = 'auto';
        }

        // Close zoom when clicking outside the content
        document.getElementById('zoomOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeZoom();
            }
        });

        // Close zoom with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeZoom();
            }
        });

        // Navigate to painting page function
        function goToPaintingPage() {
            window.location.href = 'paint.html';
        }

        // Navigate to gallery function
        function goToGallery() {
            window.location.href = '/gallery';
        }

        // Add ripple animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                0% { transform: scale(0); opacity: 1; }
                100% { transform: scale(4); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
